"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[395],{6915:function(e,t,n){var r=n(1413),i=n(5987),o=n(4706),a=n(3479),c=n(6417),s=["children"];t.Z=function(e){var t=e.children,n=(0,i.Z)(e,s);return(0,c.jsxs)(o.w,(0,r.Z)((0,r.Z)({dataKey:"_id",paginator:!0,size:"small",responsiveLayout:"scroll",showGridlines:!0,stripedRows:!0,rows:10,rowsPerPageOptions:[5,10,25,50,100]},n),{},{children:[(0,c.jsx)(a.s,{selectionMode:"multiple",style:{textAlign:"center"},headerStyle:{width:"3em"}}),t]}))}},4187:function(e,t,n){n.d(t,{r:function(){return o}});var r=n(7313),i=n(5833),o=function(){var e=(0,r.useContext)(i.Q);return{showLoading:e.showLoading,hideLoading:e.hideLoading}}},2395:function(e,t,n){n.r(t);var r=n(5861),i=n(885),o=n(7757),a=n.n(o),c=n(816),s=n.n(c),u=n(4187),l=n(7313),d=n(3830),h=n(764),f=n(1128),p=n(6915),m=n(3479),g=n(3499),x=n(6417);t.default=function(){var e=(0,l.useState)([]),t=(0,i.Z)(e,2),n=t[0],o=t[1],c=(0,l.useState)(0),y=(0,i.Z)(c,2),v=y[0],w=y[1],b=(0,l.useState)({first:0,rows:10,page:0}),j=(0,i.Z)(b,2),k=j[0],Z=j[1],C=(0,h.Z)({page:k.page+1,limit:k.rows}),N=C.isLoading,D=C.error,S=C.data,A=C.refetch,L=C.isFetching,Y=(0,d.k6)(),z=(0,u.r)(),M=z.showLoading,O=z.hideLoading;if((0,l.useEffect)((function(){L&&M(),L||O()}),[L]),(0,l.useEffect)((function(){w((null===S||void 0===S?void 0:S.total)||0)}),[S]),N)return"";if(D)return"C\xf3 l\u1ed7i x\u1ea3y ra: "+D.message;var W=function(e){Y.push({pathname:"/chapter/story-"+e._id,state:{name:e.name}})},F=function(e){Y.push("/editStory/"+e.slug)},G=function(){var e=(0,r.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.confirm("B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a truy\u1ec7n n\xe0y kh\xf4ng ?")){e.next=7;break}return M(),e.next=6,f.Gr.deleteBatch([t]);case 6:A();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log({error:e.t0});case 12:O();case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.confirm("B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a t\u1ea5t c\u1ea3 nh\u1eefng truy\u1ec7n \u0111\xe3 ch\u1ecdn kh\xf4ng ?")){e.next=8;break}return M(),e.next=6,f.Gr.deleteBatch(n.map((function(e){return e._id})));case 6:o([]),A();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log({error:e.t0});case 13:O();case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return(0,x.jsx)("div",{className:"container",children:(0,x.jsx)("div",{className:"row",children:(0,x.jsx)("div",{className:"col-12",children:(0,x.jsxs)(p.Z,{header:function(){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(g.z,{label:"Th\xeam truy\u1ec7n m\u1edbi",className:"p-button-outlined mr-1",onClick:function(){return Y.push("/addNewStory")}}),(0,x.jsx)(g.z,{label:"X\xf3a",icon:"pi pi-trash",className:"p-button-danger p-button-outlined",onClick:B,disabled:!n||!n.length})]})},value:S.data,lazy:!0,totalRecords:v,onPage:function(e){Z(e),console.log(e)},rows:k.rows,first:k.first,selection:n,onSelectionChange:function(e){return o(e.value)},children:[(0,x.jsx)(m.s,{header:(0,x.jsx)("i",{className:"pi pi-cog"}),body:function(e){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(g.z,{onClick:function(){return W(e)},icon:"pi pi-list",className:"p-button-rounded p-button-text p-button-help",tooltip:"Danh s\xe1ch ch\u01b0\u01a1ng"}),(0,x.jsx)(g.z,{onClick:function(){return F(e)},icon:"pi pi-pencil",className:"p-button-rounded p-button-text p-button-success",tooltip:"Edit truy\u1ec7n"}),(0,x.jsx)(g.z,{onClick:function(){return G(e._id)},icon:"pi pi-trash",className:"p-button-rounded p-button-text p-button-danger",tooltip:"X\xf3a truy\u1ec7n"})]})},style:{textAlign:"center",minWidth:"5rem"}}),(0,x.jsx)(m.s,{field:"name",header:"T\xean truy\u1ec7n",style:{minWidth:"25rem",maxWidth:"25rem"}}),(0,x.jsx)(m.s,{field:"createdAt",header:"Ng\xe0y \u0111\u0103ng",style:{minWidth:"5rem",textAlign:"center"},body:function(e){return s()(e.createdAt).format("DD/MM/YYYY HH:mm:ss")}}),(0,x.jsx)(m.s,{field:"updatedAt",header:"C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i",style:{minWidth:"5rem",textAlign:"center"},body:function(e){return s()(e.updatedAt).format("DD/MM/YYYY HH:mm:ss")}})]})})})})}},764:function(e,t,n){n.d(t,{t:function(){return a}});var r=n(56),i=n(1128),o=function(e){var t;return null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return(0,r.useQuery)(["storyDetail",e],(function(){return i.Gr.getStoryDetail(e)}),{retryDelay:5e3,refetchOnReconnect:!0,refetchOnWindowFocus:!1,refetchOnMount:!1,select:t})};t.Z=function(e){var t=e.page,n=e.limit,a=e.select,c=void 0===a?o:a;return(0,r.useQuery)(["stories",t,n],(function(){return i.Gr.getStories({page:t,limit:n})}),{retryDelay:5e3,refetchOnReconnect:!0,refetchOnWindowFocus:!1,refetchOnMount:!1,select:c})}}}]);