"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[483],{6915:function(e,n,t){var r=t(1413),i=t(5987),a=t(4706),o=t(3479),c=t(6417),s=["children"];n.Z=function(e){var n=e.children,t=(0,i.Z)(e,s);return(0,c.jsxs)(a.w,(0,r.Z)((0,r.Z)({dataKey:"_id",paginator:!0,size:"small",responsiveLayout:"scroll",showGridlines:!0,stripedRows:!0,rows:10,rowsPerPageOptions:[5,10,25,50,100]},t),{},{children:[(0,c.jsx)(o.s,{selectionMode:"multiple",style:{textAlign:"center"},headerStyle:{width:"3em"}}),n]}))}},4187:function(e,n,t){t.d(n,{r:function(){return a}});var r=t(7313),i=t(5833),a=function(){var e=(0,r.useContext)(i.Q);return{showLoading:e.showLoading,hideLoading:e.hideLoading}}},7483:function(e,n,t){t.r(n);var r=t(5861),i=t(885),a=t(7757),o=t.n(a),c=t(816),s=t.n(c),u=t(7313),l=t(3830),d=t(4187),h=t(1906),p=t(1128),f=t(6915),g=t(3479),m=t(3499),x=t(6814),v=t(4042),y=t(6417);n.default=function(){var e,n=(0,l.k6)(),t=(0,l.TH)(),a=(0,l.UO)().storyId,c=(0,u.useState)([]),b=(0,i.Z)(c,2),j=b[0],w=b[1],k=(0,u.useState)(0),C=(0,i.Z)(k,2),N=C[0],Z=C[1],A=(0,u.useState)({first:0,rows:10,page:0}),z=(0,i.Z)(A,2),S=z[0],L=z[1],Y=(0,h.Z)({page:S.page+1,limit:S.rows,storyId:a}),D=Y.isLoading,O=Y.error,W=Y.data,H=Y.refetch,M=Y.isFetching,R=(0,u.useState)(),B=(0,i.Z)(R,2),F=B[0],I=B[1],E=(0,u.useState)(),P=(0,i.Z)(E,2),T=P[0],X=P[1],_=(0,u.useState)(!1),K=(0,i.Z)(_,2),Q=K[0],V=K[1],G=(0,d.r)(),U=G.showLoading,q=G.hideLoading;if((0,u.useEffect)((function(){M&&U(),M||q()}),[M]),(0,u.useEffect)((function(){Z((null===W||void 0===W?void 0:W.total)||0)}),[W]),D)return"";if(O)return"C\xf3 l\u1ed7i x\u1ea3y ra: "+O.message;var J=function(e){n.push("/editChapter/story-".concat(a,"/chapter-").concat(e.order))},$=function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F&&T){e.next=3;break}return window.alert("Kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng v\u1ecb tr\xed mu\u1ed1n \u0111\u1ed5i"),e.abrupt("return");case 3:return U(),e.prev=4,e.next=7,p.jj.changeOrderChapter({storyId:a,orderA:F,orderB:T});case 7:H(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),window.alert("ERROR"),console.log({error:e.t0});case 14:q(),V(!1);case 17:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=(0,r.Z)(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.confirm("B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a ch\u01b0\u01a1ng n\xe0y kh\xf4ng ?")){e.next=7;break}return U(),e.next=6,p.jj.deleteChapter([n]);case 6:H();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log({error:e.t0});case 12:q();case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),ne=function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.confirm("B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a t\u1ea5t c\u1ea3 nh\u1eefng ch\u01b0\u01a1ng \u0111\xe3 ch\u1ecdn kh\xf4ng ?")){e.next=8;break}return U(),e.next=6,p.jj.deleteChapter(j.map((function(e){return e._id})));case 6:H(),w([]);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log({error:e.t0});case 13:q();case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return(0,y.jsxs)("div",{className:"container",children:[(0,y.jsxs)(x.V,{style:{width:"40%"},footer:(0,y.jsxs)("div",{children:[(0,y.jsx)(m.z,{label:"\u0110\xf3ng",className:"p-button-outlined p-button-secondary",onClick:function(){return V(!1)}}),(0,y.jsx)(m.z,{label:"X\xe1c nh\u1eadn \u0111\u1ed5i",className:"p-button-outlined",onClick:$,autoFocus:!0})]}),visible:Q,onHide:function(){return V(!1)},header:"\u0110\u1ed5i v\u1ecb tr\xed 2 ch\u01b0\u01a1ng",children:[(0,y.jsx)("span",{children:"Nh\u1eadp v\u1ecb tr\xed 2 ch\u01b0\u01a1ng mu\u1ed1n \u0111\u1ed5i ch\u1ed7 cho nhau"}),(0,y.jsxs)("div",{className:"mt-1",children:[(0,y.jsx)(v.o,{type:"number",placeholder:"Ch\u01b0\u01a1ng A",value:F||"",onChange:function(e){return I(e.target.value)}})," ","<=>"," ",(0,y.jsx)(v.o,{type:"number",placeholder:"Ch\u01b0\u01a1ng B",value:T||"",onChange:function(e){return X(e.target.value)}})]})]}),(0,y.jsx)(m.z,{icon:"pi pi-angle-left",label:"Danh s\xe1ch truy\u1ec7n",className:"p-button-outlined",onClick:function(){return n.push("/story")}}),(0,y.jsxs)("h2",{children:["Danh s\xe1ch ch\u01b0\u01a1ng truy\u1ec7n: ",null===(e=t.state)||void 0===e?void 0:e.name]}),(0,y.jsx)("div",{className:"row",children:(0,y.jsx)("div",{className:"col-12",children:(0,y.jsxs)(f.Z,{header:function(){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.z,{label:"Th\xeam ch\u01b0\u01a1ng m\u1edbi",className:"p-button-outlined mr-1",onClick:function(){return n.push("/addNewChapter/story-"+a)}}),(0,y.jsx)(m.z,{icon:"pi pi-sync",label:"\u0110\u1ed5i v\u1ecb tr\xed ch\u01b0\u01a1ng",className:"p-button-outlined p-button-help mr-1",onClick:function(){return V(!0)}}),(0,y.jsx)(m.z,{label:"X\xf3a",icon:"pi pi-trash",className:"p-button-danger p-button-outlined",onClick:ne,disabled:!j||!j.length})]})},value:W.data,lazy:!0,totalRecords:N,onPage:function(e){L(e),console.log(e)},rows:S.rows,first:S.first,selection:j,onSelectionChange:function(e){return w(e.value)},children:[(0,y.jsx)(g.s,{header:(0,y.jsx)("i",{className:"pi pi-cog"}),body:function(e){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(m.z,{onClick:function(){return J(e)},icon:"pi pi-pencil",className:"p-button-rounded p-button-text p-button-success",tooltip:"Edit ch\u01b0\u01a1ng"}),(0,y.jsx)(m.z,{onClick:function(){return ee(e._id)},icon:"pi pi-trash",className:"p-button-rounded p-button-text p-button-danger",tooltip:"X\xf3a ch\u01b0\u01a1ng"})]})},style:{textAlign:"center",minWidth:"5rem"}}),(0,y.jsx)(g.s,{field:"order",header:"V\u1ecb tr\xed ch\u01b0\u01a1ng",style:{textAlign:"center",minWidth:"7rem"}}),(0,y.jsx)(g.s,{field:"name",header:"T\xean ch\u01b0\u01a1ng",style:{minWidth:"25rem",maxWidth:"25rem"}}),(0,y.jsx)(g.s,{field:"createdAt",header:"Ng\xe0y \u0111\u0103ng",style:{minWidth:"5rem",textAlign:"center"},body:function(e){return s()(e.createdAt).format("DD/MM/YYYY HH:mm:ss")}}),(0,y.jsx)(g.s,{field:"updatedAt",header:"C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i",style:{minWidth:"5rem",textAlign:"center"},body:function(e){return s()(e.updatedAt).format("DD/MM/YYYY HH:mm:ss")}})]})})})]})}},1906:function(e,n,t){var r=t(56),i=t(1128),a=function(e){var n;return null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data};n.Z=function(e){var n=e.page,t=e.limit,o=e.storyId,c=e.select,s=void 0===c?a:c;return(0,r.useQuery)(["chapters",n,t,o],(function(){return i.jj.getChaptersByStory({page:n,limit:t,storyId:o})}),{retryDelay:5e3,refetchOnReconnect:!0,refetchOnWindowFocus:!1,refetchOnMount:!1,select:s})}}}]);