"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[395],{6915:function(e,t,n){var r=n(1413),i=n(5987),o=n(4706),c=n(3479),a=n(6417),s=["children"];t.Z=function(e){var t=e.children,n=(0,i.Z)(e,s);return(0,a.jsxs)(o.w,(0,r.Z)((0,r.Z)({dataKey:"_id",paginator:!0,size:"small",responsiveLayout:"scroll",showGridlines:!0,stripedRows:!0,rows:10,rowsPerPageOptions:[5,10,25,50,100]},n),{},{children:[(0,a.jsx)(c.s,{selectionMode:"multiple",style:{textAlign:"center"},headerStyle:{width:"3em"}}),t]}))}},4187:function(e,t,n){n.d(t,{r:function(){return o}});var r=n(7313),i=n(5833),o=function(){var e=(0,r.useContext)(i.Q);return{showLoading:e.showLoading,hideLoading:e.hideLoading}}},2395:function(e,t,n){n.r(t);var r=n(5861),i=n(885),o=n(7757),c=n.n(o),a=n(816),s=n.n(a),u=n(4187),l=n(7313),d=n(3830),f=n(764),h=n(9821),p=n(6915),m=n(3479),g=n(3499),x=n(6417);t.default=function(){var e=(0,l.useState)([]),t=(0,i.Z)(e,2),n=t[0],o=t[1],a=(0,l.useState)(0),y=(0,i.Z)(a,2),v=y[0],w=y[1],b=(0,l.useState)({first:0,rows:10,page:0}),j=(0,i.Z)(b,2),k=j[0],C=j[1],Z=(0,f.Z)({page:k.page+1,limit:k.rows}),N=Z.isLoading,S=Z.error,A=Z.data,D=Z.refetch,L=Z.isFetching,Y=(0,d.k6)(),z=(0,u.r)(),M=z.showLoading,O=z.hideLoading;if((0,l.useEffect)((function(){L&&M(),L||O()}),[L]),(0,l.useEffect)((function(){w((null===A||void 0===A?void 0:A.total)||0)}),[A]),N)return"";if(S)return"C\xf3 l\u1ed7i x\u1ea3y ra: "+S.message;var W=function(e){Y.push("/editStory/"+e.slug)},F=function(){var e=(0,r.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.confirm("B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a truy\u1ec7n n\xe0y kh\xf4ng ?")){e.next=7;break}return M(),e.next=6,h.Gr.deleteBatch([t]);case 6:D();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log({error:e.t0});case 12:O();case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.confirm("B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a t\u1ea5t c\u1ea3 nh\u1eefng truy\u1ec7n \u0111\xe3 ch\u1ecdn kh\xf4ng ?")){e.next=7;break}return M(),e.next=6,h.Gr.deleteBatch(n.map((function(e){return e._id})));case 6:D();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log({error:e.t0});case 12:O();case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,x.jsx)("div",{className:"container",children:(0,x.jsx)("div",{className:"row",children:(0,x.jsx)("div",{className:"col-12",children:(0,x.jsxs)(p.Z,{header:function(){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(g.z,{label:"Th\xeam truy\u1ec7n m\u1edbi",className:"p-button-outlined mr-1",onClick:function(){return Y.push("/addNewStory")}}),(0,x.jsx)(g.z,{label:"X\xf3a",icon:"pi pi-trash",className:"p-button-danger p-button-outlined",onClick:G,disabled:!n||!n.length})]})},value:A.data,lazy:!0,totalRecords:v,onPage:function(e){C(e),console.log(e)},rows:k.rows,first:k.first,selection:n,onSelectionChange:function(e){return o(e.value)},children:[(0,x.jsx)(m.s,{header:(0,x.jsx)("i",{className:"pi pi-cog"}),body:function(e){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(g.z,{onClick:function(){return W(e)},icon:"pi pi-eye",className:"p-button-rounded p-button-text p-button-help",tooltip:"Chi ti\u1ebft"}),(0,x.jsx)(g.z,{onClick:function(){return W(e)},icon:"pi pi-pencil",className:"p-button-rounded p-button-text p-button-success",tooltip:"Edit truy\u1ec7n"}),(0,x.jsx)(g.z,{onClick:function(){return F(e._id)},icon:"pi pi-trash",className:"p-button-rounded p-button-text p-button-danger",tooltip:"X\xf3a truy\u1ec7n"})]})},style:{textAlign:"center",minWidth:"5rem"}}),(0,x.jsx)(m.s,{field:"name",header:"T\xean truy\u1ec7n",style:{minWidth:"25rem",maxWidth:"25rem"}}),(0,x.jsx)(m.s,{field:"createdAt",header:"Ng\xe0y \u0111\u0103ng",style:{minWidth:"5rem",textAlign:"center"},body:function(e){return s()(e.createdAt).format("DD/MM/YYYY HH:mm:ss")}}),(0,x.jsx)(m.s,{field:"updatedAt",header:"C\u1eadp nh\u1eadt l\u1ea7n cu\u1ed1i",style:{minWidth:"5rem",textAlign:"center"},body:function(e){return s()(e.updatedAt).format("DD/MM/YYYY HH:mm:ss")}})]})})})})}},764:function(e,t,n){n.d(t,{t:function(){return c}});var r=n(56),i=n(9821),o=function(e){var t;return null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return(0,r.useQuery)(["storyDetail",e],(function(){return i.Gr.getStoryDetail(e)}),{retryDelay:5e3,refetchOnReconnect:!0,refetchOnWindowFocus:!1,refetchOnMount:!1,select:t})};t.Z=function(e){var t=e.page,n=e.limit,c=e.select,a=void 0===c?o:c;return(0,r.useQuery)(["stories",t,n],(function(){return i.Gr.getStories({page:t,limit:n})}),{retryDelay:5e3,refetchOnReconnect:!0,refetchOnWindowFocus:!1,refetchOnMount:!1,select:a})}}}]);